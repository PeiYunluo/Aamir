(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37509c1e"],{3123:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"a",(function(){return r}));var o=e("b775");function n(){return Object(o["a"])({url:"/photo/qiniu/getToken",method:"get"})}function r(){return Object(o["a"])({url:"/photo/qiniu/getAllphotos",method:"get"})}},c405:function(t,a,e){"use strict";e.d(a,"c",(function(){return n})),e.d(a,"d",(function(){return r})),e.d(a,"b",(function(){return i})),e.d(a,"e",(function(){return s})),e.d(a,"a",(function(){return l}));var o=e("b775");function n(){return Object(o["a"])({url:"/category/getAll",method:"get"})}function r(t){return Object(o["a"])({url:"/category/list",method:"get",params:t})}function i(t){return Object(o["a"])({url:"category/delete",method:"post",data:t})}function s(t){return Object(o["a"])({url:"category/updatename",method:"post",data:t})}function l(t){return Object(o["a"])({url:"category/add",method:"post",data:t})}},caf6:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"f",(function(){return r})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){return s})),e.d(a,"g",(function(){return l})),e.d(a,"e",(function(){return c})),e.d(a,"i",(function(){return u})),e.d(a,"h",(function(){return d})),e.d(a,"d",(function(){return v}));var o=e("b775");function n(t){return Object(o["a"])({url:"/post/create",method:"post",data:t})}function r(t){return Object(o["a"])({url:"/post/list",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/post/delete",method:"post",data:t})}function s(t){return Object(o["a"])({url:"/post/commentswitch",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/post/gettagsbyid",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/post/getcategoriesbyid",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/post/updatePost",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/post/statusswitch",method:"post",data:t})}function v(t){return Object(o["a"])({url:"/post/getPostbyid",method:"get",params:t})}},d161:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.PostSaveParam.summary,callback:function(a){t.$set(t.PostSaveParam,"summary",a)},expression:"PostSaveParam.summary"}},[e("template",{slot:"prepend"},[t._v("前言")])],2),t._v(" "),e("hr"),t._v(" "),e("el-form",{ref:"form",attrs:{model:t.PostSaveParam}},[e("el-form-item",{staticStyle:{width:"20%"},attrs:{label:"文章标题","label-width":"70px"}},[e("el-input",{model:{value:t.PostSaveParam.title,callback:function(a){t.$set(t.PostSaveParam,"title",a)},expression:"PostSaveParam.title"}}),t._v(" "),e("hr")],1),t._v(" "),e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.PostSaveParam.url,callback:function(a){t.$set(t.PostSaveParam,"url",a)},expression:"PostSaveParam.url"}},[e("template",{slot:"prepend"},[t._v("自定义路径")])],2),t._v(" "),e("hr"),t._v(" "),e("span",[t._v(" 标签:")]),t._v(" "),e("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.tags,callback:function(a){t.tags=a},expression:"tags"}},t._l(t.options1,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),e("span",[t._v(" 分类:")]),t._v(" "),e("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.categories,callback:function(a){t.categories=a},expression:"categories"}},t._l(t.options2,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),e("el-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[e("el-radio",{attrs:{label:0}},[t._v("草稿")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("发布")]),t._v(" "),e("el-radio",{attrs:{label:2}},[t._v("备选项")])],1),t._v(" "),e("hr"),t._v(" "),e("el-form-item",{attrs:{label:"不允许评论"}},[e("el-switch",{model:{value:t.PostSaveParam.disallowComment,callback:function(a){t.$set(t.PostSaveParam,"disallowComment",a)},expression:"PostSaveParam.disallowComment"}})],1),t._v(" "),e("MarkdownPro",{attrs:{height:600,theme:"light",initialValue:"Hello Aamir"},on:{"on-save":t.handleOnSave},model:{value:t.PostSaveParam.originalContent,callback:function(a){t.$set(t.PostSaveParam,"originalContent",a)},expression:"PostSaveParam.originalContent"}})],1),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Create")]),t._v(" "),e("el-button",{on:{click:t.onCancel}},[t._v("Cancel")]),t._v(" "),e("el-button",{staticStyle:{width:"10%","margin-bottom":"30px"},on:{click:t.OnSave}},[t._v("保存\n  ")]),t._v(" "),e("el-drawer",{attrs:{title:"我是标题",visible:t.drawer,"with-header":!1},on:{"update:visible":function(a){t.drawer=a}}},[e("h3",{attrs:{align:"center"}},[t._v("图片上传")]),t._v(" "),e("div",[e("el-upload",{attrs:{action:"https://upload.qbox.me",data:t.dataObj,drag:"",multiple:!0,"before-upload":t.beforeUpload,align:"center","on-success":t.uploadSuccess}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])])])],1),t._v(" "),e("el-tabs",[e("el-tab-pane",{attrs:{label:"Copy and Paste",name:"directly"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.url+"/"+t.dataObj.key,callback:function(a){t.$set(t.url+"/"+t.dataObj,"key",a)},expression:"url+'/'+dataObj.key"}}),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"document"},on:{click:function(a){return t.handleCopy(t.url+"/"+t.dataObj.key,a)}}},[t._v("copy")])],1),t._v(" "),""!=t.dataObj.key?e("img",{attrs:{src:t.url+"/"+t.dataObj.key+"?imageView2/1/w/320/h/180"}}):t._e()],1)],1),t._v(" "),e("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(a){t.drawer=!0}}},[t._v("\n    点我打开\n  ")])],1)},n=[],r=(e("cc57"),e("da99")),i=e("caf6"),s=e("d28d"),l=e("c405"),c=e("3123"),u=e("6e6d"),d=e("f348"),v=e.n(d);function m(){u["default"].prototype.$message({message:"复制成功",type:"success",duration:1500})}function p(){u["default"].prototype.$message({message:"复制失败",type:"error"})}function f(t,a){var e=new v.a(a.target,{text:function(){return t}});e.on("success",(function(){m(),e.off("error"),e.off("success"),e.destroy()})),e.on("error",(function(){p(),e.off("error"),e.off("success"),e.destroy()})),e.onClick(a)}var g=e("f348");if(!g)throw new Error("you shold npm install `clipboard` --save at first ");var b={bind:function(t,a){if("success"===a.arg)t._v_clipboard_success=a.value;else if("error"===a.arg)t._v_clipboard_error=a.value;else{var e=new g(t,{text:function(){return a.value},action:function(){return"cut"===a.arg?"cut":"copy"}});e.on("success",(function(a){var e=t._v_clipboard_success;e&&e(a)})),e.on("error",(function(a){var e=t._v_clipboard_error;e&&e(a)})),t._v_clipboard=e}},update:function(t,a){"success"===a.arg?t._v_clipboard_success=a.value:"error"===a.arg?t._v_clipboard_error=a.value:(t._v_clipboard.text=function(){return a.value},t._v_clipboard.action=function(){return"cut"===a.arg?"cut":"copy"})},unbind:function(t,a){"success"===a.arg?delete t._v_clipboard_success:"error"===a.arg?delete t._v_clipboard_error:(t._v_clipboard.destroy(),delete t._v_clipboard)}},h=function(t){t.directive("Clipboard",b)};window.Vue&&(window.clipboard=b,Vue.use(h)),b.install=h;var _=b,P={name:"markdown",components:{MarkdownPro:r["a"]},directives:{clipboard:_},props:{},data:function(){return{url:"http://q6yuglcls.bkt.clouddn.com",dataObj:{token:"",key:""},image_uri:[],fileList:[],drawer:!1,radio:0,value:void 0,defaultData:"preview",options1:[],options2:[],tags:[],categories:[],PostSaveParam:{id:void 0,title:"",status:0,url:"",originalContent:"",summary:"",disallowComment:!1,deleted:!1,tagsid:[],categoriesid:[]}}},created:function(){this.getParams(),this.inittags(),this.initcategories(),this.initpost()},watch:{$route:"getParams"},methods:{handleOnSave:function(t){var a=t.value,e=t.theme;console.log(a,e)},OnSave:function(){var t=this.value;console.log(this.tags),console.log(t)},onSubmit:function(){this.$message("submit!"),this.PostSaveParam.status=this.radio,this.PostSaveParam.tagsid=this.tags,this.PostSaveParam.categoriesid=this.categories,Object(i["b"])(this.PostSaveParam).then((function(t){console.log(t),200==t.data.resultCode&&alert("创建文章成功！")}))},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},inittags:function(){var t=this,a=this;Object(s["c"])().then((function(e){for(var o=0;o<e.data.data.length;o++)a.options1[o]={value:e.data.data[o].id,label:e.data.data[o].name},t.$forceUpdate();console.log(a.options1)}))},initcategories:function(){var t=this,a=this;Object(l["c"])().then((function(e){for(var o=0;o<e.data.data.length;o++)a.options2[o]={value:e.data.data[o].id,label:e.data.data[o].categroyname},t.$forceUpdate();console.log(a.options2)}))},getParams:function(){this.PostSaveParam.id=this.$route.query.id},initpost:function(){var t=this;void 0!==this.$route.query.id&&Object(i["d"])({id:this.$route.query.id}).then((function(a){t.PostSaveParam.id=a.data.data.id,t.PostSaveParam.title=a.data.data.title,t.PostSaveParam.status=a.data.data.status,t.PostSaveParam.url=a.data.data.url,t.PostSaveParam.originalContent=a.data.data.originalContent,t.PostSaveParam.summary=a.data.data.summary,t.PostSaveParam.disallowComment=a.data.data.disallowComment,t.PostSaveParam.deleted=a.data.data.deleted,t.PostSaveParam.tagsid=a.data.data.tagsid,t.PostSaveParam.categoriesid=a.data.data.categoriesid,t.tags=a.data.data.tagsid,t.categories=a.data.data.categoriesid,console.log(t.PostSaveParam)}))},beforeUpload:function(t){console.log("+++++++++++++++++++++++++++++"+t.name);var a=this;return new Promise((function(t,e){Object(c["b"])().then((function(e){console.log(e.data.data);var o=e.data.data.key,n=e.data.data.token;a.dataObj.token=n,a.dataObj.key=o,t(!0)})).catch((function(t){console.log(t),e(!1)}))}))},uploadSuccess:function(t,a,e){console.log(t),console.log(a.name),console.log(e)},handleCopy:function(t,a){f(t,a)},clipboardSuccess:function(){this.$message({message:"复制成功",type:"success",duration:1500})}}},y=P,S=e("623f"),w=Object(S["a"])(y,o,n,!1,null,null,null);a["default"]=w.exports},d28d:function(t,a,e){"use strict";e.d(a,"c",(function(){return n})),e.d(a,"d",(function(){return r})),e.d(a,"a",(function(){return i})),e.d(a,"e",(function(){return s})),e.d(a,"b",(function(){return l}));var o=e("b775");function n(){return Object(o["a"])({url:"/tag/getAlltags",method:"get"})}function r(t){return Object(o["a"])({url:"/tag/list",method:"get",params:t})}function i(t){return Object(o["a"])({url:"tag/addTag",method:"post",data:t})}function s(t){return Object(o["a"])({url:"tag/updateTagname",method:"post",data:t})}function l(t){return Object(o["a"])({url:"tag/deleteTag",method:"post",data:t})}}}]);