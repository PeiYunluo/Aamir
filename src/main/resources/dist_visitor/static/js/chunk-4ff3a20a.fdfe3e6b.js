(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ff3a20a"],{"2ae3":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("article",{staticClass:"main-content page-page",attrs:{itemscope:"",itemtype:"http://schema.org/Article"}},[n("div",{staticClass:"post-header"},[n("h1",{staticClass:"post-title",attrs:{itemprop:"name headline"}},[t._v(" "+t._s(t.newpost.title)+" ")]),t._v(" "),n("div",{staticClass:"post-data"},[n("time",{attrs:{datetime:"2019-01-20T22:55:00+08:00",itemprop:"datePublished"}},[t._v("Published on "+t._s(t._f("formatDate")(t.newpost.createTime))+"\n        ")])])]),t._v(" "),n("div",{staticClass:"post-content",attrs:{id:"post-content",itemprop:"articleBody"}},[n("p",{staticClass:"post-tags"},t._l(t.tags,(function(e){return n("a",{on:{click:function(n){return t.handleTags(e.id)}}},[t._v(t._s(e.name))])})),0),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.newpost.originalContent)}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.newpost.disallowComment,expression:"!newpost.disallowComment"}],staticClass:"comment-container",staticStyle:{"background-color":"beige"}},[n("comment",{attrs:{comments:t.commentData,postid:t.query.id}}),t._v(" "),n("span",[t._v("新增评论：")]),t._v(" "),n("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#409EFF","inactive-color":"#67C23A"},model:{value:t.openform,callback:function(e){t.openform=e},expression:"openform"}}),t._v(" "),n("hr"),t._v(" "),t.openform?n("el-form",[n("el-input",{attrs:{placeholder:"少侠请留名"},model:{value:t.newcomment.author,callback:function(e){t.$set(t.newcomment,"author",e)},expression:"newcomment.author"}},[n("template",{slot:"prepend"},[t._v("作者:")])],2),t._v(" "),n("br"),t._v(" "),n("el-input",{attrs:{placeholder:"地址呢"},model:{value:t.newcomment.email,callback:function(e){t.$set(t.newcomment,"email",e)},expression:"newcomment.email"}},[n("template",{slot:"prepend"},[t._v("电子邮箱:")])],2),t._v(" "),n("br"),t._v(" "),n("el-input",{staticClass:"gray-bg-input",attrs:{type:"textarea",rows:3,autofocus:"",placeholder:"写下你的评论"},model:{value:t.newcomment.content,callback:function(e){t.$set(t.newcomment,"content",e)},expression:"newcomment.content"}}),t._v(" "),n("el-button",{on:{click:t.handlecancel}},[t._v("取消")]),t._v(" "),n("el-button",{on:{click:t.commitComment}},[t._v("提交")])],1):t._e()],1)]),t._v(" "),n("div",{staticClass:"clearfix"})])},s=[],a=n("b775");function i(t){return Object(a["a"])({url:"/misc/getPostbyid",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/misc/getAlltagsbypostid",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/misc/getAllcomments",method:"get",params:{id:t}})}function r(t){return Object(a["a"])({url:"/misc/addComment",method:"post",data:t})}var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},t._l(t.comments,(function(e){return n("div",{staticClass:"comment"},[n("div",{staticClass:"info"},[n("img",{staticClass:"avatar",attrs:{src:t.circleUrl,width:"36",height:"36"}}),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"name"},[t._v(t._s(e.comment.author))]),t._v(" "),n("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(e.comment.createTime)))])])]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.comment.content))]),t._v(" "),n("div",{staticClass:"control"},[n("span",{staticClass:"comment-reply",on:{click:function(n){return t.showCommentInput(e)}}},[n("i",{staticClass:"iconfont icon-comment"}),t._v(" "),n("span",[t._v("回复")])])]),t._v(" "),n("div",{staticClass:"reply"},[t._l(e.replycomments,(function(o){return n("div",{staticClass:"item"},[n("div",{staticClass:"reply-content"},[n("span",{staticClass:"from-name"},[t._v(t._s(o.author))]),n("span",[t._v(": ")]),t._v(" "),n("span",[t._v(t._s(o.content))])]),t._v(" "),n("div",{staticClass:"reply-bottom"},[n("span",[t._v(t._s(t._f("formatDate")(o.createTime)))]),t._v(" "),n("span",{staticClass:"reply-text",on:{click:function(n){return t.showCommentInput(e,o)}}},[n("i",{staticClass:"iconfont icon-comment"}),t._v(" "),n("span",[t._v("回复")])])])])})),t._v(" "),e.replycomments.length>0?n("div",{staticClass:"write-reply",on:{click:function(n){return t.showCommentInput(e)}}},[n("i",{staticClass:"el-icon-edit"}),t._v(" "),n("span",{staticClass:"add-comment"},[t._v("添加新评论")])]):t._e(),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showItemId===e.comment.id?n("div",{staticClass:"input-wrapper"},[n("el-form",[n("el-input",{attrs:{placeholder:"少侠请留名"},model:{value:t.commentform.author,callback:function(e){t.$set(t.commentform,"author",e)},expression:"commentform.author"}},[n("template",{slot:"prepend"},[t._v("作者:")])],2),t._v(" "),n("br"),t._v(" "),n("el-input",{attrs:{placeholder:"地址呢"},model:{value:t.commentform.email,callback:function(e){t.$set(t.commentform,"email",e)},expression:"commentform.email"}},[n("template",{slot:"prepend"},[t._v("电子邮箱:")])],2),t._v(" "),n("br"),t._v(" "),n("el-input",{staticClass:"gray-bg-input",attrs:{type:"textarea",rows:3,autofocus:"",placeholder:"写下你的评论"},model:{value:t.commentform.content,callback:function(e){t.$set(t.commentform,"content",e)},expression:"commentform.content"}})],1),t._v(" "),n("div",{staticClass:"btn-control"},[n("span",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{staticClass:"btn",attrs:{type:"success",round:""},on:{click:function(n){return t.commitComment(e)}}},[t._v("确定")])],1)],1):t._e()])],2)])})),0)},u=[],d=n("6e6d"),p={name:"comment",props:{postid:{required:!0},comments:{type:Array,required:!0}},components:{},data:function(){return{circleUrl:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",inputComment:"",showItemId:"",commentform:{author:void 0,email:void 0,content:void 0,postId:void 0,parentId:void 0}}},computed:{},methods:{likeClick:function(t){null===t.isLike?(d["default"].$set(t,"isLike",!0),t.likeNum++):(t.isLike?t.likeNum--:t.likeNum++,t.isLike=!t.isLike)},cancel:function(){this.showItemId=""},commitComment:function(t,e){var n=this,o=this;this.commentform.postId=this.postid,this.commentform.parentId=t.comment.id,r(o.commentform).then((function(t){console.log(t),200===t.data.resultCode?n.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}):n.$notify({title:"失败",message:"字段不能为空",type:"error",duration:2e3})}))},showCommentInput:function(t,e){console.log(e),console.log(t),this.commentform.content=e?"@"+e.author+" ":"",this.showItemId=t.comment.id}},created:function(){console.log(this.comments)}},v=p,f=(n("6f4e"),n("623f")),h=Object(f["a"])(v,l,u,!1,null,"28dd62c5",null),_=h.exports,C={name:"artical-detail",components:{comment:_},data:function(){return{openform:!1,newcomment:{author:void 0,email:void 0,content:void 0,postId:void 0,parentId:void 0},commentData:[],query:{id:void 0},newpost:{originalContent:void 0},tags:[]}},created:function(){this.getParams(),this.initPost(),this.initTags(),this.initComments()},methods:{getParams:function(){this.query.id=this.$route.query.id},initPost:function(){var t=this;console.log(this.query),i(t.query).then((function(e){t.newpost=e.data.data,console.log(t.newpost)}))},initTags:function(){var t=this;c(t.query).then((function(e){t.tags=e.data.data}))},initComments:function(){var t=this;m(t.query.id).then((function(e){t.commentData=e.data.data}))},addComment:function(){},handlecancel:function(){this.openform=!1},commitComment:function(){var t=this;this.newcomment.postId=this.query.id,this.newcomment.parentId=0,r(t.newcomment).then((function(t){})),this.$notify({title:"评论",message:"已提交，等待管理员审核",type:"success",duration:2e3}),this.openform=!1},handleTags:function(t){this.$router.push({path:"/articlebytag/index",query:{id:t}})}}},w=C,g=Object(f["a"])(w,o,s,!1,null,"469e3ea4",null);e["default"]=g.exports},"6f4e":function(t,e,n){"use strict";var o=n("d0ae"),s=n.n(o);s.a},d0ae:function(t,e,n){}}]);